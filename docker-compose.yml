version: '3.8'
services:
  s3mer:
    container_name: s3mer
    restart: always
    image: ghcr.io/theasda/s3mer:${IMAGE_VERSION}
    ports:
      - 9000:9000
    volumes:
      - /docker/cert.crt:/app/cert.crt
      - /docker/ca.crt:/app/ca.crt
      - /docker/private.key:/app/private.key
    labels: 
      - traefik.enable=true
      - traefik.http.routers.s3mer.rule=Host(`okinazuno.me`)
      - traefik.http.services.s3mer.loadbalancer.server.port=9000
      - traefik.http.routers.s3mer.service=s3mer
      - traefik.http.routers.s3mer.tls=true
      - traefik.docker.network=traefik-network

networks:
  default:
    external: true
    name: traefik-network
